# 🎯 면접 스케줄러 시스템 전체 구조도

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              🚀 APP.PY (메인 진입점)                                │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │  📋 Streamlit UI 구성                                                      │   │
│  │  ├── 🎯 운영일정 추정 (메인 섹션)                                          │   │
│  │  ├── 1️⃣ 면접활동 정의                                                    │   │
│  │  ├── 2️⃣ 선후행 제약 설정                                                  │   │
│  │  ├── 3️⃣ 면접 날짜 및 직무 설정                                            │   │
│  │  ├── 4️⃣ 직무별 면접활동 정의                                              │   │
│  │  ├── 5️⃣ 운영 공간 설정                                                    │   │
│  │  └── 6️⃣ 운영 시간 설정                                                    │   │
│  └─────────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              🔧 CORE.PY (중간 계층)                                 │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │  📦 build_config()                                                         │   │
│  │  ├── Streamlit 세션 상태 → Solver 설정 딕셔너리 변환                        │   │
│  │  ├── activities, job_acts_map, room_plan, oper_window, precedence 등       │   │
│  │  └── interview_dates, multidate_plans (멀티 날짜 지원)                     │   │
│  │                                                                             │   │
│  │  🚀 run_solver()                                                           │   │
│  │  ├── UI 설정 + 파라미터를 solver.solve로 전달                              │   │
│  │  └── 상태, 결과, 로그 반환                                                 │   │
│  │                                                                             │   │
│  │  📊 to_excel()                                                            │   │
│  │  └── DataFrame → Excel(bytes) 변환 (다운로드용)                            │   │
│  └─────────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                            🎛️ SOLVER/API.PY (API 계층)                             │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │  🚀 solve_for_days_v2() (새로운 계층적 스케줄러)                           │   │
│  │  ├── UI 데이터 → 내부 형식 변환                                            │   │
│  │  ├── MultiDateScheduler 실행                                              │   │
│  │  ├── 실시간 진행 상황 콜백 지원                                           │   │
│  │  └── 결과 → UI 형식 변환                                                   │   │
│  │                                                                             │   │
│  │  📊 solve_for_days() (기존 OR-Tools 스케줄러)                              │   │
│  │  ├── 하위 호환성을 위한 기존 인터페이스                                    │   │
│  │  └── OR-Tools 기반 스케줄링                                               │   │
│  │                                                                             │   │
│  │  🔍 get_scheduler_comparison()                                            │   │
│  │  └── 스케줄러 성능 비교 정보 제공                                          │   │
│  └─────────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                          🏗️ SOLVER/SOLVER.PY (기존 OR-Tools)                       │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │  🔧 _derive_internal_tables()                                             │   │
│  │  ├── UI 설정 → OR-Tools 내부 테이블 변환                                   │   │
│  │  ├── cfg_duration: 활동별 소요시간                                         │   │
│  │  ├── cfg_map: 활동별 방 매핑                                              │   │
│  │  ├── cfg_avail: 방별 용량 정보                                            │   │
│  │  └── cfg_oper: 운영시간 설정                                              │   │
│  │                                                                             │   │
│  │  🚀 solve_for_days()                                                      │   │
│  │  ├── OR-Tools 모델 빌드 및 실행                                           │   │
│  │  ├── 제약 조건 처리 (선후행, 시간, 공간)                                   │   │
│  │  └── 최적화 결과 반환                                                     │   │
│  │                                                                             │   │
│  │  📊 _calculate_dynamic_daily_limit()                                      │   │
│  │  └── 설정 기반 일일 최대 처리 인원 계산                                    │   │
│  └─────────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                        🚀 SOLVER/MULTI_DATE_SCHEDULER.PY (새로운 계층적)            │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │  🎯 MultiDateScheduler 클래스                                             │   │
│  │  ├── 멀티 날짜 스케줄링 통합 관리                                          │   │
│  │  ├── 날짜별 병렬 처리 지원                                                 │   │
│  │  └── 전체 결과 통합 및 최적화                                              │   │
│  │                                                                             │   │
│  │  📋 schedule() 메서드                                                     │   │
│  │  ├── 각 날짜별 SingleDateScheduler 실행                                   │   │
│  │  ├── 날짜 간 리소스 충돌 해결                                             │   │
│  │  └── 전체 스케줄 최적화                                                   │   │
│  └─────────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                        📅 SOLVER/SINGLE_DATE_SCHEDULER.PY                          │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │  🎯 SingleDateScheduler 클래스                                            │   │
│  │  ├── 단일 날짜 스케줄링 전담                                               │   │
│  │  ├── 계층적 스케줄링 알고리즘 구현                                         │   │
│  │  └── Level 1-4 최적화 단계                                                │   │
│  │                                                                             │   │
│  │  🔄 Level 1: 기본 스케줄링                                                │   │
│  │  ├── 지원자별 활동 순서 결정                                               │   │
│  │  ├── 선후행 제약 처리                                                     │   │
│  │  └── 기본 시간 배치                                                       │   │
│  │                                                                             │   │
│  │  🔄 Level 2: 공간 최적화                                                  │   │
│  │  ├── 방별 배정 최적화                                                     │   │
│  │  ├── 용량 제약 처리                                                       │   │
│  │  └── 공간 효율성 향상                                                     │   │
│  │                                                                             │   │
│  │  🔄 Level 3: 그룹 최적화                                                  │   │
│  │  ├── Batched 활동 그룹화                                                   │   │
│  │  ├── 그룹 크기 최적화                                                     │   │
│  │  └── 그룹 간 균형 조정                                                    │   │
│  │                                                                             │   │
│  │  🔄 Level 4: 후처리 최적화                                                │   │
│  │  ├── 체류시간 최적화                                                       │   │
│  │  ├── 대기시간 최소화                                                       │   │
│  │  └── 전체 효율성 향상                                                     │   │
│  └─────────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                           🔧 SOLVER/INDIVIDUAL_SCHEDULER.PY                        │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │  👤 IndividualScheduler 클래스                                            │   │
│  │  ├── 개별 지원자 스케줄링 처리                                             │   │
│  │  ├── 활동별 시간 배정                                                      │   │
│  │  └── 개인별 제약 조건 처리                                                 │   │
│  │                                                                             │   │
│  │  🔄 schedule_individual()                                                 │   │
│  │  ├── 지원자별 활동 순서 결정                                               │   │
│  │  ├── 시간 슬롯 배정                                                       │   │
│  │  └── 개인별 최적화                                                         │   │
│  └─────────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                           👥 SOLVER/BATCHED_SCHEDULER.PY                           │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │  👥 BatchedScheduler 클래스                                               │   │
│  │  ├── 그룹 활동 스케줄링 처리                                               │   │
│  │  ├── 토론면접, 발표면접 등 그룹 활동                                        │   │
│  │  └── 그룹 크기 및 구성 최적화                                               │   │
│  │                                                                             │   │
│  │  🔄 schedule_batched()                                                    │   │
│  │  ├── 그룹 구성 알고리즘                                                    │   │
│  │  ├── 그룹별 시간 배정                                                      │   │
│  │  └── 그룹 간 균형 조정                                                     │   │
│  └─────────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                        🔧 SOLVER/GROUP_OPTIMIZER_V2.PY                             │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │  🎯 GroupOptimizerV2 클래스                                               │   │
│  │  ├── 그룹 최적화 알고리즘 v2                                               │   │
│  │  ├── 성능 향상된 그룹 구성                                                 │   │
│  │  └── 동적 그룹 크기 조정                                                   │   │
│  │                                                                             │   │
│  │  🔄 optimize_groups()                                                     │   │
│  │  ├── 그룹 크기 최적화                                                      │   │
│  │  ├── 그룹 구성 균형 조정                                                   │   │
│  │  └── 효율성 향상                                                           │   │
│  └─────────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                        ⚡ SOLVER/LEVEL4_POST_PROCESSOR.PY                          │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │  🎯 Level4PostProcessor 클래스                                            │   │
│  │  ├── Level 4 후처리 최적화                                                 │   │
│  │  ├── 체류시간 최적화                                                       │   │
│  │  └── 대기시간 최소화                                                       │   │
│  │                                                                             │   │
│  │  🔄 optimize_stay_times()                                                 │   │
│  │  ├── 체류시간 분석                                                         │   │
│  │  ├── 문제 케이스 식별                                                     │   │
│  │  └── 스케줄 재조정                                                         │   │
│  │                                                                             │   │
│  │  🔄 minimize_wait_times()                                                 │   │
│  │  ├── 대기시간 분석                                                         │   │
│  │  ├── 활동 순서 최적화                                                     │   │
│  │  └── 전체 효율성 향상                                                     │   │
│  └─────────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                           📊 SOLVER/TYPES.PY (타입 정의)                           │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │  📋 데이터 타입 정의                                                       │   │
│  │  ├── DatePlan: 날짜별 계획                                                │   │
│  │  ├── GlobalConfig: 전역 설정                                              │   │
│  │  ├── MultiDateResult: 멀티 날짜 결과                                      │   │
│  │  ├── PrecedenceRule: 선후행 규칙                                          │   │
│  │  ├── ActivityMode: 활동 모드 (individual/parallel/batched)                │   │
│  │  ├── ActivityType: 활동 타입                                              │   │
│  │  ├── Activity: 활동 정보                                                  │   │
│  │  ├── Room: 방 정보                                                        │   │
│  │  ├── DateConfig: 날짜별 설정                                              │   │
│  │  ├── ProgressCallback: 진행 상황 콜백                                     │   │
│  │  └── SchedulingContext: 스케줄링 컨텍스트                                 │   │
│  └─────────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              📤 결과 출력 및 다운로드                                │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │  📊 Excel 출력                                                             │   │
│  │  ├── Schedule 시트: 기본 스케줄                                            │   │
│  │  ├── TS_MMDD 시트: 날짜별 타임슬롯                                         │   │
│  │  └── 색상 코딩 및 그룹 정보                                                │   │
│  │                                                                             │   │
│  │  📈 체류시간 분석                                                          │   │
│  │  ├── 직무별 통계                                                          │   │
│  │  ├── 날짜별 통계                                                          │   │
│  │  └── 최적화 효과 분석                                                     │   │
│  │                                                                             │   │
│  │  🔍 실시간 진행 상황                                                       │   │
│  │  ├── 진행률 표시                                                          │   │
│  │  ├── 단계별 상세 정보                                                     │   │
│  │  └── 로그 출력                                                            │   │
│  └─────────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────────┘

# 🔄 데이터 흐름

```
📋 UI 입력 → 🔧 Core 변환 → 🎛️ API 처리 → 🏗️ 스케줄러 실행 → 📊 결과 출력
```

# 🎯 주요 특징

## 🚀 성능 최적화
- **계층적 스케줄러 v2**: ~6,000명/초 처리량
- **OR-Tools 스케줄러**: ~100명/초 처리량 (최적해 보장)
- **병렬 처리**: 멀티코어 CPU 활용
- **캐싱**: 반복 계산 최적화

## 🔧 유연한 구성
- **Individual 모드**: 1명씩 개별 면접
- **Parallel 모드**: 여러명 동시 개별 활동
- **Batched 모드**: 그룹 활동 (토론, 발표 등)
- **멀티 날짜**: 여러 날에 걸친 면접 지원

## 📊 스마트 최적화
- **Level 1-4 계층적 최적화**
- **체류시간 최적화**
- **대기시간 최소화**
- **공간 효율성 향상**

## 🎨 사용자 친화적
- **실시간 진행 상황 표시**
- **Excel 다운로드**
- **타임슬롯 시각화**
- **통계 분석** 